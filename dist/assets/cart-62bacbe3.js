import{r as G}from"./resumen-1f9049c7.js";import{r as k,u as F,q as N,w as I,J as B,o as z,b,c as a,K as L,D as P,e,g as d,d as r,F as x,f as $,v as g,x as p,G as V,E as S,L as U,_ as O,B as R,z as M,A as H}from"./index-c7bb22ef.js";const J="/images/empty-cart.jpg",K={style:{color:"black","background-color":"white"},class:"grid"},Q={class:"mb-2"},W={class:"mb-2 text-center"},X={class:"mt-2"},Y={key:0,class:"p-0",style:{display:"flex",width:"100%",gap:"1rem"}},Z={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},ee={class:"text-sm adicion",style:{"text-transform":"capitalize"}},te={key:0,style:{display:"flex","align-items":"center"}},ie={key:0,class:"pl-2 py-1 text-sm"},oe={key:1,class:"pl-2 py-1 text-sm"},se=e("hr",null,null,-1),ne={class:"col-12 p-0",style:{display:"flex","justify-content":"center","font-weight":"bold"}},ae={__name:"dialogAddAditions",setup(w){const i=k({}),C=F(),y=N(),A=(o,l)=>{if(o.checked){const m={id:o.aditional_item_instance_id,name:o.aditional_item_name,price:o.aditional_item_price,group:l};i.value[m.id]={...m,quantity:o.quantity||1}}else delete i.value[o.aditional_item_instance_id]},q=o=>{if(o.checked){const l={id:o.aditional_item_instance_id,name:o.aditional_item_name,price:o.aditional_item_price};i.value[l.id].quantity++}},T=o=>{i.value[o.aditional_item_instance_id].quantity>1&&i.value[o.aditional_item_instance_id]&&i.value[o.aditional_item_instance_id].quantity--};I(()=>y.visibles.addAdditionToCart,async o=>{var l,m;if(!o)i.value={},f.value=[];else{const t=y.cart.products.map(c=>c.product.id);t.length>0&&(f.value=await B.getAditionalGroup(t,(m=(l=C.location)==null?void 0:l.site)==null?void 0:m.site_id))}},{deep:!0});const j=()=>{Object.values(i.value).forEach(l=>{y.addAdditionToCart(l),console.log(l)}),i.value={},y.setVisible("addAdditionToCart",!1)},f=k([]);return k(!0),z(async()=>{var l,m;const o=y.cart.products.map(t=>t.product.id);o.length>0&&(f.value=await B.getAditionalGroup(o,(m=(l=C.location)==null?void 0:l.site)==null?void 0:m.site_id))}),(o,l)=>{const m=b("Checkbox"),t=b("Button"),c=b("InputText"),h=b("Dialog");return a(),L(h,{class:"mx-3",closable:!0,style:U([{"background-color":"white"},{width:"30rem","border-radius":"0.5rem"}]),visible:p(y).visibles.addAdditionToCart,"onUpdate:visible":l[1]||(l[1]=n=>p(y).visibles.addAdditionToCart=n),modal:"",header:"Header"},{footer:P(()=>[e("div",ne,[d(t,{onClick:j,style:{width:"auto"},severity:"danger",label:"Agregar al carrito"})])]),default:P(()=>[e("div",K,[(a(!0),r(x,null,$(f.value,n=>(a(),r("div",{class:"col-12",style:{},key:n.category},[e("div",Q,[e("span",W,[e("b",null,g(n.category),1)]),e("div",X,[(a(!0),r(x,null,$(n.items,s=>{var _,v;return a(),r("div",{key:s.aditional_item_instance_id,style:{display:"flex",gap:"1rem"}},[p(y).cart.products.some(u=>u.product.category_name==s.product_category_name)?(a(),r("div",Y,[d(m,{class:"my-1",binary:!0,modelValue:s.checked,"onUpdate:modelValue":u=>s.checked=u,onChange:()=>A(s,n.category)},null,8,["modelValue","onUpdate:modelValue","onChange"]),e("div",Z,[e("span",ee,g(s.aditional_item_name),1),s.checked&&n.category!="SALSAS"?(a(),r("span",te,[s.aditional_item_price>0?(a(),r("span",ie,[e("b",null,g(p(V)(s.aditional_item_price*((_=i.value[s.aditional_item_instance_id])==null?void 0:_.quantity))),1)])):S("",!0),d(t,{onClick:u=>T(s),class:"ml-2",severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-minus"},null,8,["onClick"]),d(c,{modelValue:(v=i.value[s.aditional_item_instance_id])==null?void 0:v.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),d(t,{onClick:u=>q(s),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-plus"},null,8,["onClick"])])):s.aditional_item_price>0?(a(),r("span",oe,[e("b",null,g(p(V)(s.aditional_item_price)),1)])):S("",!0)])])):S("",!0)])}),128)),se])])]))),128))]),d(t,{onClick:l[0]||(l[0]=n=>p(y).setVisible("addAdditionToCart",!1)),icon:"pi pi-times",style:{position:"absolute",right:"-1rem",top:"-1rem"},rounded:"",severity:"danger"})]),_:1},8,["visible"])}}};const D=w=>(M("data-v-cab3c0e5"),w=w(),H(),w),le={key:0,class:"col-12 my-8 md:my-8 p-0"},de=D(()=>e("b",null,[e("h2",{class:"m-0 text-4xl md:text-7xl"},[e("b",{class:"text-white"}," CARRITO DE COMPRAS ")])],-1)),re={class:"grid mx-auto",style:{"max-width":"800px"}},ce={class:"col-12 text-sm md:col-6 p-3 md:px-4",style:{display:"flex","background-color":"","flex-direction":"column",gap:"1rem","justify-content":"center"}},ue={class:"col-12 py-3 p-shadow",style:{display:"flex","align-items":"end","background-color":"#ffffff",position:"relative",gap:"1rem","border-radius":"0.3rem"}},_e=["src"],pe={style:{display:"flex","flex-direction":"column",gap:"0.4rem",width:"100%"}},me={style:{display:"flex","flex-direction":"column",gap:"0.3rem",width:"100%"}},he={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%",gap:"1rem"}},ye={class:"p-0 m-0"},ge={style:{"text-transform":"uppercase","font-weight":"bold"}},ve={style:{display:"flex"}},be=D(()=>e("div",null,null,-1)),fe={class:"p-0",style:{"box-shadow":"0 0 0.5rem rgba(0, 0, 0, 0.2)","background-color":"#ff620000","border-radius":"5rem",display:"flex"}},xe={class:"p-0 m-0"},ke={class:"col-12 p-0 mt-1"},we={class:"mb-2"},Ce={class:"mb-2 text-center"},Ae={class:"mt-2",style:{"background-color":"red"}},$e={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},Se={class:"text adicion",style:{"text-transform":"capitalize"}},Te={style:{display:"flex","align-items":"center"}},Ve={key:0,class:"pl-2 py-1 text-sm"},qe={key:1,style:{"box-shadow":"0 0 5px rgba(0, 0, 0, 0.411)",display:"flex","border-radius":"0.3rem"},class:"ml-2"},je={key:1,class:"col-12",style:{display:"flex","justify-content":"center",height:"90vh","align-items":"center"}},Ie=D(()=>e("img",{style:{"border-radius":"0",filter:"invert()","mix-blend-mode":"multiply",width:"100%","max-width":"500px"},src:J,alt:""},null,-1)),Be=[Ie],Pe={__name:"cart",setup(w){const i=N(),C=F(),y=k({}),A=k({}),q=R(),T=()=>{A.value=i.cart.additions.reduce((t,c)=>{let h=c.group;return t[h]||(t[h]=[]),t[h].push(c),t},{})};I(()=>i.cart.additions,()=>{T()},{deep:!0});const j=t=>{const c={...t};c.quantity=1,i.addAdditionToCart(c)},f=t=>{t.quantity>1&&i.removeAdditionFromCart(t.id)},o=t=>{i.removeAdditionCompletelyFromCart(t.id),T()},l=t=>{t.forEach(c=>{o(c)})};I(()=>i.visibles.addAdditionToCart,t=>{t&&(y.value={})},{deep:!0});const m=k([]);return z(async()=>{var c;((c=q.user.payment_method_option)==null?void 0:c.id)!=7?C.setNeighborhoodPrice():C.setNeighborhoodPriceCero();const t=53;m.value=await B.getAditional(t),A.value=i.cart.additions.reduce((h,n)=>{let s=n.group;return h[s]||(h[s]=[]),h[s].push(n),h},{})}),(t,c)=>{const h=b("P"),n=b("Button"),s=b("InputText");return a(),r(x,null,[p(i).cart.products.length>0?(a(),r("div",le,[d(h,{class:"text-center text-2xl md:text-5xl my-8 text-white"},{default:P(()=>[de]),_:1}),e("div",re,[e("div",ce,[(a(!0),r(x,null,$(p(i).cart.products,_=>(a(),r("div",ue,[e("img",{style:{width:"5rem","object-fit":"cover",height:"5rem"},src:`https://backend.salchimonster.com/read-photo-product/${_.product.img_identifier}/600`,alt:""},null,8,_e),d(n,{class:"ml-2",onClick:v=>p(i).removeProductFromCart(_.product.id),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),e("div",pe,[e("div",me,[e("div",he,[e("span",ye,g(_.product.product_name),1)]),e("span",ge,g(_.product.category_name),1),e("div",ve,[be,e("div",fe,[d(n,{onClick:v=>p(i).removeProductInstance(_.product.id),icon:"pi pi-minus",severity:"danger",style:{border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0.4rem 0 0 0.4rem"}},null,8,["onClick"]),d(s,{class:"text-center",style:{"background-color":"white","border-radius":"0%","font-weight":"bold",width:"3rem",height:"1.5rem",color:"black",border:"none"},modelValue:_.quantity,readonly:""},null,8,["modelValue"]),d(n,{onClick:v=>p(i).addProductToCart(_.product),icon:"pi pi-plus ",severity:"danger",style:{"font-weight":"bold",border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0 0.4rem   0.4rem 0"}},null,8,["onClick"])])])])]),e("h5",xe,[e("b",null,g(p(V)(_.total_cost)),1)])]))),256)),e("div",ke,[(a(!0),r(x,null,$(A.value,(_,v)=>(a(),r("div",{class:"p-shadow p-3 mb-4",key:v,style:{position:"relative","border-radius":"0.3rem"}},[d(n,{class:"ml-2",onClick:u=>l(_),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),e("div",we,[e("span",Ce,[e("b",null,g(v),1)]),e("div",Ae,[(a(!0),r(x,null,$(_,u=>(a(),r("div",{key:u.aditional_item_instance_id,style:{display:"flex",gap:"1rem","align-items":"center"}},[d(n,{text:"",rounded:"",onClick:E=>o(u),class:"p-0 m-0",severity:"danger",style:{width:"2rem",height:"2rem",border:"none"},icon:"pi pi-trash m-0"},null,8,["onClick"]),e("div",$e,[e("span",Se,g(u.name),1),e("span",Te,[u.price>0?(a(),r("span",Ve,[e("b",null,g(p(V)(u.price*u.quantity)),1)])):S("",!0),v!="SALSAS"?(a(),r("div",qe,[d(n,{onClick:E=>f(u),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0.3rem 0 0 0.3rem"},icon:"pi pi-minus"},null,8,["onClick"]),d(s,{modelValue:u.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),d(n,{onClick:E=>j(u),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0 0.3rem 0.3rem 0"},icon:"pi pi-plus"},null,8,["onClick"])])):S("",!0)])])]))),128))])])]))),128)),e("div",{onClick:c[0]||(c[0]=_=>p(i).setVisible("addAdditionToCart",!0)),class:"col-12 p-0 m-0",style:{display:"flex","justify-content":"end"}},[d(n,{style:{width:"2rem",left:".3rem",height:"2rem"},rounded:"",severity:"danger",icon:"pi pi-plus"})])])]),d(G,{class:"md:col-6"})])])):(a(),r("div",je,Be)),d(ae)],64)}}},Fe=O(Pe,[["__scopeId","data-v-cab3c0e5"]]);export{Fe as default};
